<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="https://www.flaticon.com/br/icones-gratis/e-book" />

    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="reset.css" />
    <link rel="stylesheet" href="styles.css" />

    <title>My Books</title>
    <meta name="description" content="List of books. The your book list!" />
  </head>

  <body>
    <img src="images/Star.svg" alt="red star" class="star" />

    <div class="container">
      <div class="title">
        <h1>My Books</h1>
      </div>

      <div class="subtitle">
        <h2>add book</h2>
      </div>

      <form class="form" onsubmit="return submitForm(event)">
        <div class="field-group">
          <label for="bookname">Book</label>
          <input type="text" id="bookname" name="bookname" required />
        </div>

        <div class="field-group">
          <label for="authorname">Author</label>
          <input type="text" id="authorname" name="authorname" required />
        </div>

        <label class="read">Read</label>

        <div>
          <label class="Radio" for="yes">
            <input
              class="Radio-Input"
              type="radio"
              id="yes"
              name="read"
              value="read"
            />
            Yes
          </label>

          <label class="Radio" for="no">
            <input
              class="Radio-Input"
              type="radio"
              id="no"
              name="read"
              value="not read"
              checked
            />
            No
          </label>
        </div>

        <input type="submit" class="add" value="send book" />
      </form>
      <div id="list"></div>
      <script>
        let listBooks = [];
        let listAuthors = [];
        let listReadOption = [];

        /*listBooks.push("Milani");
        listBooks.push("Outro nome");
        listBooks.push("Lucas");
        listBooks.splice(0,1)

        console.log(listBooks);
        console.log(listBooks[0]);*/

        function renderBookList() {
          let listDiv = document.getElementById("list");

          listDiv.innerHTML = "";

          let els = document.getElementsByName("read");
          for (let index = 0; index < els.length; index++) {
            if (els[index].checked) {
              listReadOption.push(els[index].value);
            }
          }

          let tamanhoLista = listBooks.length;
          for (let index = 0; index < tamanhoLista; index++) {
            console.log(listBooks[index] + " - " + listAuthors[index]);
            listDiv.append(
              listBooks[index] + ", " + listAuthors[index] + " - " + listReadOption[index] + "\n"
            );

            listDiv.innerHTML += "<hr/>";
          }
          //listDiv.append(listBooks, listAuthors);

          //abre um alert com o button selecionado
          /* var seg = document.querySelector("input[name=read]:checked").value;
          alert(seg); */
          /*           alert(document.querySelector('input[name=read]:checked').value)
           */
        }

        function submitForm(event) {
          event.preventDefault();

          let bookNameInput = document.getElementById("bookname");

          let authornameInput = document.getElementById("authorname");

          let readRadios = document.getElementsByName("read");

          listBooks.push(bookNameInput.value);
          console.log(listBooks);

          listAuthors.push(authornameInput.value);
          console.log(listAuthors);

          //TODO: usar forEach p/ identificar qual opção foi selecionada
          //TODO: Colocar o valor da opção selecionada no array (listReadOption)
          //TODO: mostrar a opção selecionada dentro do renderBookList

          //readRadios.forEach

          /*console.log(readRadio.checked);
           console.log(bookNameInput.value);
          console.log(authornameInput.value); */

          //limpa o input após o envio
          bookNameInput.value = "";
          authornameInput.value = "";
          //mostra o valor após envio
          renderBookList();
        }
      </script>
    </div>
  </body>
</html>
